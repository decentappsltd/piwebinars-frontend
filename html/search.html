<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script>Pi.init({ version: "2.0", sandbox: true })</script>
<script>

Pi.createPayment({
  amount: 1,
  memo: "Unlock Webinar",
  metadata: { UnlockWebinarOD },
}, {
  onReadyForServerApproval: onReadyForServerApproval,
  onReadyForServerCompletion: onReadyForServerCompletion,
  onCancel: onCancel,
  onError: onError,
});
const paymentResult = await window.Pi.createPayment(paymentData, callbacks);
const axiosClient = axios.create{baseURL: SERVER_URL, timeout: 20000});
const config = {headers: {'Content-Type': 'application/json', 'Access-Control-Allow-Origin': '*'}};

const onReadyForServerApproval = (paymentId: string) => {
  console.log("onReadyForServerApproval", paymentId);
  return axiosClient.post('/approve', {paymentId}, config);
}

const onReadyForServerCompletion = (paymentId: string, txid: string) => {
  console.log("onReadyForServerCompletion", paymentId);
  return axiosClient.post('/complete', {paymentId}, config);
}

const onCancel = (paymentId: string) => {
  console.log("onCancel", paymentId);
  return axiosClient.post('/cancel', {paymentId}, config):
}

const onError = (error: Error, payment?: PaymentDTO) => {
  console.log("onError", error);
  if (payment) {
    console.log(payment);
    //handle the error
  }
}

function createPayment() {
  var x = document.getElementsByClassName("pay");
}
        </script>

<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="../css/styles.css">
     <link rel="icon" 
      type="image/png" 
      href="./img/logo.png">
  <title>Pi Webinars</title>
  
  <h1 >Pi Webinars</h1>
  
<nav>
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="search.html">Search</a></li>
    <li><a href="all-webinars.html">All Webinars</a></li>
    <li><a href="upload.html">Upload</a></li>
  </ul>
</nav>  
  
  <h3>Search Webinars:</h3>
  
<script async src="https://cse.google.com/cse.js?cx=49f21ac287cae8634"></script>
<div class="gcse-search"></div>
  
</html>
